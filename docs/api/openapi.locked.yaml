openapi: 3.1.0
info:
  title: FaultMaven API
  description: "\n# FaultMaven API Documentation\n\nAI-powered troubleshooting assistant\
    \ for Engineers, SREs, and DevOps professionals.\n\n## Architecture Overview\n\
    \nThe FaultMaven API follows clean architecture principles with:\n\n- **API Layer**:\
    \ FastAPI routers handling HTTP requests with comprehensive middleware\n- **Service\
    \ Layer**: Business logic orchestration using dependency injection\n- **Core Layer**:\
    \ Domain logic including AI reasoning engine and data processing\n- **Infrastructure\
    \ Layer**: External service integrations (LLM providers, databases, security)\n\
    \n## Key Features\n\n- **AI-Powered Troubleshooting**: Advanced reasoning engine\
    \ using multiple LLM providers\n- **Privacy-First Design**: Comprehensive PII\
    \ redaction before external processing\n- **Session Management**: Redis-backed\
    \ session persistence for multi-turn conversations\n- **Knowledge Base**: RAG-enabled\
    \ document ingestion and retrieval using ChromaDB\n- **Data Processing**: Intelligent\
    \ log analysis and classification\n- **Performance Monitoring**: Real-time metrics\
    \ and health monitoring\n- **Error Recovery**: Automatic error detection and recovery\
    \ mechanisms\n\n## Authentication\n\nThe API now includes a complete authentication\
    \ system with development endpoints.\nThese endpoints provide token-based authentication\
    \ for secure access to protected resources.\n\n**Available Authentication Endpoints:**\n\
    \n- `POST /api/v1/auth/dev-register` - Create new user accounts (development)\n\
    - `POST /api/v1/auth/dev-login` - Authenticate existing users (development)\n\
    - `POST /api/v1/auth/logout` - Revoke current authentication token\n- `GET /api/v1/auth/me`\
    \ - Get current user profile information\n- `GET /api/v1/auth/health` - Check\
    \ authentication system health\n- `POST /api/v1/auth/dev/revoke-all-tokens` -\
    \ Development utility for token management\n\n**Token Management:**\n\n- Tokens\
    \ are Bearer tokens included in the `Authorization` header\n- Default expiration:\
    \ 24 hours\n- Tokens can be revoked individually or all at once\n\n**Security\
    \ Features:**\n\n- Input validation and sanitization\n- Duplicate account prevention\n\
    - Proper OAuth2-compatible error responses\n- Token-based session management\n\
    \n**Development vs Production:**\n\nCurrent endpoints are designed for development\
    \ environments. Production authentication will use OAuth2/OIDC integration with\
    \ enterprise identity providers.\n\n## Rate Limiting\n\nAPI requests are subject\
    \ to rate limiting to ensure fair usage and system stability.\nCurrent limits\
    \ are applied at the infrastructure level.\n\n## Error Handling\n\nAll endpoints\
    \ return structured error responses with appropriate HTTP status codes.\n\n###\
    \ Standard Error Response Format\n\n```json\n{\n    \"detail\": \"Human-readable\
    \ error description\",\n    \"error_type\": \"ErrorType\",\n    \"correlation_id\"\
    : \"uuid-here\",\n    \"timestamp\": \"2025-01-15T10:30:00Z\"\n}\n```\n\n### Common\
    \ HTTP Status Codes\n\n- `200`: Success\n- `400`: Bad Request - Invalid input\
    \ data\n- `401`: Unauthorized - Authentication required (future)\n- `404`: Not\
    \ Found - Resource not found\n- `422`: Validation Error - Request data validation\
    \ failed\n- `429`: Too Many Requests - Rate limit exceeded\n- `500`: Internal\
    \ Server Error - Unexpected server error\n- `503`: Service Unavailable - External\
    \ service unavailable\n\n## Data Privacy\n\nAll data submitted to the API is processed\
    \ through privacy-first pipelines with:\n\n- Comprehensive PII redaction using\
    \ Microsoft Presidio\n- Data sanitization before external LLM processing\n- Session-based\
    \ data isolation\n- Configurable data retention policies\n\n## Performance Characteristics\n\
    \n- **Response Time**: < 200ms for typical queries (excluding LLM processing)\n\
    - **Throughput**: Supports 100+ concurrent requests\n- **Availability**: 99.9%\
    \ uptime target with health monitoring\n- **Scalability**: Horizontal scaling\
    \ support via stateless design\n        "
  version: 1.0.0
  contact:
    name: FaultMaven Team
    email: support@faultmaven.ai
    url: https://faultmaven.ai
  license:
    name: Proprietary
    url: https://faultmaven.ai/license
paths:
  /api/v1/data:
    post:
      tags:
      - data_ingestion
      - data_processing
      summary: Upload Data Compat
      description: Upload and process log files, configuration files, or other diagnostic
        data
      operationId: upload_data_compat_api_v1_data_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_data_compat_api_v1_data_post'
            examples:
              log_file_upload:
                summary: Application Log File
                description: Upload application logs for analysis
                value:
                  file: '[Binary log file content]'
                  file_type: application_logs
                  description: Production API server logs from the last 24 hours
              kubernetes_yaml:
                summary: Kubernetes Configuration
                description: Upload Kubernetes YAML for configuration analysis
                value:
                  file: '[YAML configuration content]'
                  file_type: kubernetes_config
                  description: Deployment configuration showing resource issues
        required: true
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/data/upload:
    post:
      tags:
      - data_ingestion
      - data_processing
      summary: Upload Data
      description: "Upload and process data with clean delegation pattern\n\nThis\
        \ endpoint follows the thin controller pattern:\n1. Basic input validation\
        \ (file size, type)\n2. Pure delegation to service layer for all business\
        \ logic\n3. Clean error boundary handling\n\nArgs:\n    file: File to upload\n\
        \    session_id: Session identifier \n    description: Optional description\
        \ of the data\n    data_service: Injected DataService from DI container\n\
        \    \nReturns:\n    UploadedData with processing results\n    \nRaises:\n\
        \    HTTPException: On service layer errors (400, 404, 413, 500)"
      operationId: upload_data_api_v1_data_upload_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_data_api_v1_data_upload_post'
        required: true
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/data/batch-upload:
    post:
      tags:
      - data_ingestion
      - data_processing
      summary: Batch Upload Data
      description: "Batch upload multiple files with clean delegation\n\nArgs:\n \
        \   files: List of files to upload\n    session_id: Session identifier\n \
        \   data_service: Injected DataService\n    \nReturns:\n    List of UploadedData\
        \ results"
      operationId: batch_upload_data_api_v1_data_batch_upload_post
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_batch_upload_data_api_v1_data_batch_upload_post'
        required: true
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/UploadedData'
                type: array
                title: Response Batch Upload Data Api V1 Data Batch Upload Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/data/{data_id}/analyze:
    post:
      tags:
      - data_ingestion
      - data_processing
      summary: Analyze Data
      description: "Analyze uploaded data with clean delegation\n\nArgs:\n    data_id:\
        \ Data identifier to analyze\n    analysis_request: Request containing session_id\
        \ and analysis parameters\n    data_service: Injected DataService\n    \n\
        Returns:\n    DataInsightsResponse with analysis results"
      operationId: analyze_data_api_v1_data__data_id__analyze_post
      parameters:
      - name: data_id
        in: path
        required: true
        schema:
          type: string
          title: Data Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              title: Analysis Request
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Analyze Data Api V1 Data  Data Id  Analyze Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/data/sessions/{session_id}:
    get:
      tags:
      - data_ingestion
      - data_processing
      summary: Get Session Data
      description: "Get all data for a session with clean delegation\n\nArgs:\n  \
        \  session_id: Session identifier\n    limit: Maximum number of results\n\
        \    offset: Pagination offset\n    data_service: Injected DataService\n \
        \   \nReturns:\n    List of UploadedData for the session"
      operationId: get_session_data_api_v1_data_sessions__session_id__get
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      - name: limit
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          default: 10
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          anyOf:
          - type: integer
          - type: 'null'
          default: 0
          title: Offset
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Session Data Api V1 Data Sessions  Session Id  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/data/sessions/{session_id}/batch-process:
    post:
      tags:
      - data_ingestion
      - data_processing
      summary: Batch Process Session Data
      description: "Batch process data for a session\n\nArgs:\n    session_id: Session\
        \ identifier\n    batch_request: Request with data_ids to process\n    data_service:\
        \ Injected DataService\n    \nReturns:\n    Batch processing job information"
      operationId: batch_process_session_data_api_v1_data_sessions__session_id__batch_process_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              title: Batch Request
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Batch Process Session Data Api V1 Data Sessions  Session
                  Id  Batch Process Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/data/health:
    get:
      tags:
      - data_ingestion
      - data_processing
      summary: Health Check
      description: "Health check endpoint with service delegation\n\nReturns:\n  \
        \  Service health status"
      operationId: health_check_api_v1_data_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/v1/data/{data_id}:
    get:
      tags:
      - data_ingestion
      - data_processing
      summary: Get Data
      description: "Get data by ID\n\nArgs:\n    data_id: Data identifier\n    data_service:\
        \ Injected DataService\n    \nReturns:\n    Data information"
      operationId: get_data_api_v1_data__data_id__get
      parameters:
      - name: data_id
        in: path
        required: true
        schema:
          type: string
          title: Data Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UploadedData'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - data_ingestion
      - data_processing
      summary: Delete Data
      description: "Delete uploaded data with clean delegation\n\nArgs:\n    data_id:\
        \ Data identifier to delete\n    session_id: Session identifier for access\
        \ control (query parameter)\n    data_service: Injected DataService\n    \n\
        Returns:\n    Success confirmation"
      operationId: delete_data_api_v1_data__data_id__delete
      parameters:
      - name: data_id
        in: path
        required: true
        schema:
          type: string
          title: Data Id
      - name: session_id
        in: query
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/documents:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Upload Document
      description: "Upload a document to the knowledge base\n\nArgs:\n    file: Document\
        \ file to upload\n    title: Document title\n    document_type: Type of document\n\
        \    tags: Comma-separated tags\n    source_url: Source URL if applicable\n\
        \nReturns:\n    Upload job information"
      operationId: upload_document_api_v1_knowledge_documents_post
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_document_api_v1_knowledge_documents_post'
            examples:
              runbook_upload:
                summary: Troubleshooting Runbook
                description: Upload team runbook for knowledge base
                value:
                  file: '[PDF or Markdown runbook content]'
                  document_type: runbook
                  tags:
                  - database
                  - troubleshooting
                  - postgresql
                  description: Database troubleshooting procedures and common fixes
              documentation_upload:
                summary: System Documentation
                description: Upload system architecture documentation
                value:
                  file: '[Documentation content]'
                  document_type: architecture_doc
                  tags:
                  - architecture
                  - microservices
                  - system_design
                  description: Microservices architecture overview and dependencies
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Upload Document Api V1 Knowledge Documents Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: List Documents
      description: "List knowledge base documents with optional filtering\n\nArgs:\n\
        \    document_type: Filter by document type\n    tags: Filter by tags (comma-separated)\n\
        \    limit: Maximum number of documents to return\n    offset: Number of documents\
        \ to skip\n\nReturns:\n    List of documents"
      operationId: list_documents_api_v1_knowledge_documents_get
      parameters:
      - name: document_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Document Type
      - name: tags
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Offset
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response List Documents Api V1 Knowledge Documents Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/documents/{document_id}:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Document
      description: "Get a specific knowledge base document\n\nArgs:\n    document_id:\
        \ Document identifier\n\nReturns:\n    Document details"
      operationId: get_document_api_v1_knowledge_documents__document_id__get
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: string
          title: Document Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeBaseDocument'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Delete Document
      description: "Delete a knowledge base document\n\nArgs:\n    document_id: Document\
        \ identifier\n\nReturns:\n    Deletion confirmation"
      operationId: delete_document_api_v1_knowledge_documents__document_id__delete
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: string
          title: Document Id
      responses:
        '204':
          description: Successful Response
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Update Document
      description: Update document metadata and content.
      operationId: update_document_api_v1_knowledge_documents__document_id__put
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: string
          title: Document Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              title: Update Data
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Update Document Api V1 Knowledge Documents  Document
                  Id  Put
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/jobs/{job_id}:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Job Status
      description: "Get the status of a knowledge base ingestion job\n\nArgs:\n  \
        \  job_id: Job identifier\n\nReturns:\n    Job status information"
      operationId: get_job_status_api_v1_knowledge_jobs__job_id__get
      parameters:
      - name: job_id
        in: path
        required: true
        schema:
          type: string
          title: Job Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Job Status Api V1 Knowledge Jobs  Job Id  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/search:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Search Documents
      description: "Search knowledge base documents\n\nArgs:\n    request: Search\
        \ request with query and filters\n\nReturns:\n    Search results"
      operationId: search_documents_api_v1_knowledge_search_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Search Documents Api V1 Knowledge Search Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/documents/bulk-update:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Bulk Update Documents
      description: Bulk update document metadata.
      operationId: bulk_update_documents_api_v1_knowledge_documents_bulk_update_post
      requestBody:
        content:
          application/json:
            schema:
              type: object
              title: Request
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Bulk Update Documents Api V1 Knowledge Documents Bulk
                  Update Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/documents/bulk-delete:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Bulk Delete Documents
      description: Bulk delete documents.
      operationId: bulk_delete_documents_api_v1_knowledge_documents_bulk_delete_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties:
                items:
                  type: string
                type: array
              type: object
              title: Request
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Bulk Delete Documents Api V1 Knowledge Documents Bulk
                  Delete Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/knowledge/stats:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Knowledge Stats
      description: Get knowledge base statistics.
      operationId: get_knowledge_stats_api_v1_knowledge_stats_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Knowledge Stats Api V1 Knowledge Stats Get
  /api/v1/knowledge/analytics/search:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Search Analytics
      description: Get search analytics and insights.
      operationId: get_search_analytics_api_v1_knowledge_analytics_search_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Search Analytics Api V1 Knowledge Analytics Search
                  Get
  /api/v1/kb/documents:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Upload Document Kb
      description: Upload a document to the knowledge base (kb prefix)
      operationId: upload_document_kb_api_v1_kb_documents_post
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_document_kb_api_v1_kb_documents_post'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Upload Document Kb Api V1 Kb Documents Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: List Documents Kb
      description: List knowledge base documents (kb prefix)
      operationId: list_documents_kb_api_v1_kb_documents_get
      parameters:
      - name: document_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Document Type
      - name: tags
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Offset
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response List Documents Kb Api V1 Kb Documents Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/kb/documents/{document_id}:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Document Kb
      description: Get a specific document (kb prefix)
      operationId: get_document_kb_api_v1_kb_documents__document_id__get
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: string
          title: Document Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KnowledgeBaseDocument'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Delete Document Kb
      description: Delete a document (kb prefix)
      operationId: delete_document_kb_api_v1_kb_documents__document_id__delete
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: string
          title: Document Id
      responses:
        '204':
          description: Successful Response
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Update Document Kb
      description: Update document (kb prefix)
      operationId: update_document_kb_api_v1_kb_documents__document_id__put
      parameters:
      - name: document_id
        in: path
        required: true
        schema:
          type: string
          title: Document Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              title: Update Data
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Update Document Kb Api V1 Kb Documents  Document Id  Put
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/kb/jobs/{job_id}:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Job Status Kb
      description: Get job status (kb prefix)
      operationId: get_job_status_kb_api_v1_kb_jobs__job_id__get
      parameters:
      - name: job_id
        in: path
        required: true
        schema:
          type: string
          title: Job Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Job Status Kb Api V1 Kb Jobs  Job Id  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/kb/search:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Search Documents Kb
      description: Search documents (kb prefix)
      operationId: search_documents_kb_api_v1_kb_search_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Search Documents Kb Api V1 Kb Search Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/kb/documents/bulk-update:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Bulk Update Documents Kb
      description: Bulk update documents (kb prefix)
      operationId: bulk_update_documents_kb_api_v1_kb_documents_bulk_update_post
      requestBody:
        content:
          application/json:
            schema:
              type: object
              title: Request
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Bulk Update Documents Kb Api V1 Kb Documents Bulk
                  Update Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/kb/documents/bulk-delete:
    post:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Bulk Delete Documents Kb
      description: Bulk delete documents (kb prefix)
      operationId: bulk_delete_documents_kb_api_v1_kb_documents_bulk_delete_post
      requestBody:
        content:
          application/json:
            schema:
              additionalProperties:
                items:
                  type: string
                type: array
              type: object
              title: Request
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Bulk Delete Documents Kb Api V1 Kb Documents Bulk
                  Delete Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/kb/stats:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Knowledge Stats Kb
      description: Get knowledge stats (kb prefix)
      operationId: get_knowledge_stats_kb_api_v1_kb_stats_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Knowledge Stats Kb Api V1 Kb Stats Get
  /api/v1/kb/analytics/search:
    get:
      tags:
      - knowledge_base
      - knowledge_base
      summary: Get Search Analytics Kb
      description: Get search analytics (kb prefix)
      operationId: get_search_analytics_kb_api_v1_kb_analytics_search_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Search Analytics Kb Api V1 Kb Analytics Search
                  Get
  /api/v1/sessions:
    post:
      tags:
      - session_management
      - session_management
      summary: Create Session
      description: "Create a new troubleshooting session.\n\nArgs:\n    request: Session\
        \ creation parameters\n    user_id: Optional user identifier (query param)\n\
        \nReturns:\n    Session creation response"
      operationId: create_session_api_v1_sessions_post
      parameters:
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      requestBody:
        content:
          application/json:
            schema:
              anyOf:
              - $ref: '#/components/schemas/SessionCreateRequest'
              - type: 'null'
              title: Request
            examples:
              new_session:
                summary: Create New Session
                description: Start a new troubleshooting session
                value:
                  timeout_minutes: 60
                  session_type: troubleshooting
                  metadata:
                    environment: production
                    team: platform-team
                    incident_priority: high
              resume_session_with_client_id:
                summary: Resume Session with Client ID
                description: Resume existing session using client identifier for session
                  continuity
                value:
                  timeout_minutes: 60
                  session_type: troubleshooting
                  client_id: browser-client-abc123
                  metadata:
                    environment: production
                    team: platform-team
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - session_management
      - session_management
      summary: List Sessions
      description: "List all sessions with optional filtering.\n\nArgs:\n    user_id:\
        \ Optional user ID filter\n    session_type: Optional session type filter\n\
        \    usage_type: Optional usage type filter (alias for session_type)\n   \
        \ limit: Maximum number of sessions to return\n    offset: Number of sessions\
        \ to skip\n\nReturns:\n    List of sessions"
      operationId: list_sessions_api_v1_sessions_get
      parameters:
      - name: user_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
      - name: session_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Type
      - name: usage_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Usage Type
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          default: 0
          title: Offset
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}:
    get:
      tags:
      - session_management
      - session_management
      summary: Get Session
      description: "Retrieve a specific session by ID.\n\nArgs:\n    session_id: Session\
        \ identifier\n\nReturns:\n    Session details"
      operationId: get_session_api_v1_sessions__session_id__get
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - session_management
      - session_management
      summary: Delete Session
      description: "Delete a specific session.\n\nArgs:\n    session_id: Session identifier\n\
        \nReturns:\n    Deletion confirmation"
      operationId: delete_session_api_v1_sessions__session_id__delete
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '204':
          description: Successful Response
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}/cases:
    get:
      tags:
      - session_management
      - session_management
      summary: List Session Cases
      description: "List all cases associated with a session.\n\nCRITICAL: Must return\
        \ 200 [] for empty results, NOT 404\n\nArgs:\n    session_id: Session identifier\n\
        \    limit: Maximum number of cases to return (1-100)\n    offset: Number\
        \ of cases to skip for pagination\n\nReturns:\n    List of cases (empty list\
        \ if no cases found)"
      operationId: list_session_cases_api_v1_sessions__session_id__cases_get
      security:
      - BearerAuth: []
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          default: 0
          title: Offset
      - name: include_empty
        in: query
        required: false
        schema:
          type: boolean
          description: Include cases with message_count == 0
          default: false
          title: Include Empty
        description: Include cases with message_count == 0
      - name: include_archived
        in: query
        required: false
        schema:
          type: boolean
          description: Include archived cases
          default: false
          title: Include Archived
        description: Include archived cases
      - name: include_deleted
        in: query
        required: false
        schema:
          type: boolean
          description: Include deleted cases (admin only)
          default: false
          title: Include Deleted
        description: Include deleted cases (admin only)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}/heartbeat:
    post:
      tags:
      - session_management
      - session_management
      summary: Session Heartbeat
      description: "Update session activity timestamp (heartbeat).\n\nArgs:\n    session_id:\
        \ Session identifier\n\nReturns:\n    Heartbeat confirmation"
      operationId: session_heartbeat_api_v1_sessions__session_id__heartbeat_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}/stats:
    get:
      tags:
      - session_management
      - session_management
      summary: Get Session Stats
      description: "Get session statistics and activity summary.\n\nArgs:\n    session_id:\
        \ Session identifier\n\nReturns:\n    Session statistics"
      operationId: get_session_stats_api_v1_sessions__session_id__stats_get
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}/cleanup:
    post:
      tags:
      - session_management
      - session_management
      summary: Cleanup Session
      description: "Clean up session data and temporary files.\n\nArgs:\n    session_id:\
        \ Session identifier\n\nReturns:\n    Cleanup confirmation"
      operationId: cleanup_session_api_v1_sessions__session_id__cleanup_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}/recovery-info:
    get:
      tags:
      - session_management
      - session_management
      summary: Get Session Recovery Info
      description: "Get session recovery information for restoring lost sessions.\n\
        \nArgs:\n    session_id: Session identifier\n\nReturns:\n    Recovery information"
      operationId: get_session_recovery_info_api_v1_sessions__session_id__recovery_info_get
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/sessions/{session_id}/restore:
    post:
      tags:
      - session_management
      - session_management
      summary: Restore Session
      description: "Restore a session from backup or recovery state.\n\nArgs:\n  \
        \  session_id: Session identifier\n    restore_request: Restoration parameters\n\
        \nReturns:\n    Restoration confirmation"
      operationId: restore_session_api_v1_sessions__session_id__restore_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SessionRestoreRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}:
    delete:
      tags:
      - case_persistence
      - cases
      summary: Delete Case
      description: "Permanently delete a case and all associated data.\n\nThis endpoint\
        \ provides hard delete functionality. Once deleted, \nthe case and all associated\
        \ data are permanently removed.\n\nThe operation is idempotent - subsequent\
        \ requests will return \n204 No Content even if the case has already been\
        \ deleted.\n\nReturns 204 No Content on success."
      operationId: delete_case_api_v1_cases__case_id__delete
      security:
      - BearerAuth: []
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      responses:
        '204':
          description: Case deleted successfully
          headers:
            X-Correlation-ID:
              description: Request correlation ID
              schema:
                type: string
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case
      description: 'Get a specific case by ID


        Returns the full case details including conversation history,

        participants, and context information.'
      operationId: get_case_api_v1_cases__case_id__get
      security:
      - BearerAuth: []
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Case'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - case_persistence
      - cases
      summary: Update Case
      description: 'Update case details


        Updates case metadata such as title, description, status, priority, and tags.

        Requires edit permissions on the case.'
      operationId: update_case_api_v1_cases__case_id__put
      security:
      - BearerAuth: []
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CaseUpdateRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases:
    post:
      tags:
      - case_persistence
      - cases
      summary: Create Case
      description: 'Create a new troubleshooting case


        Creates a new case for tracking troubleshooting sessions and conversations.

        The case will persist beyond individual session lifetimes.'
      operationId: create_case_api_v1_cases_post
      security:
      - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CaseCreateRequest'
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - case_persistence
      - cases
      summary: List Cases
      description: "List cases with pagination\n\nReturns a list of cases accessible\
        \ to the authenticated user.\nAlways returns 200 with raw array (Case[]);\
        \ returns [] when no results.\nSupports pagination via page/limit parameters\
        \ with X-Total-Count and Link headers.\n\nDefault Filtering Behavior:\n- Excludes\
        \ empty cases (message_count == 0) unless include_empty=true\n- Excludes archived\
        \ cases unless include_archived=true  \n- Excludes deleted cases unless include_deleted=true\
        \ (admin only)\n- Only returns active cases with messages by default"
      operationId: list_cases_api_v1_cases_get
      security:
      - BearerAuth: []
      parameters:
      - name: page
        in: query
        required: false
        schema:
          type: integer
          minimum: 1
          description: Page number
          default: 1
          title: Page
        description: Page number
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          description: Items per page
          default: 20
          title: Limit
        description: Items per page
      - name: include_empty
        in: query
        required: false
        schema:
          type: boolean
          description: Include cases with message_count == 0
          default: false
          title: Include Empty
        description: Include cases with message_count == 0
      - name: include_archived
        in: query
        required: false
        schema:
          type: boolean
          description: Include archived cases
          default: false
          title: Include Archived
        description: Include archived cases
      - name: include_deleted
        in: query
        required: false
        schema:
          type: boolean
          description: Include deleted cases (admin only)
          default: false
          title: Include Deleted
        description: Include deleted cases (admin only)
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Case'
                title: Response List Cases Api V1 Cases Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/share:
    post:
      tags:
      - case_persistence
      - cases
      summary: Share Case
      description: 'Share a case with another user


        Grants access to the case for the specified user with the given role.

        Requires share permissions on the case.'
      operationId: share_case_api_v1_cases__case_id__share_post
      security:
      - BearerAuth: []
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CaseShareRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Share Case Api V1 Cases  Case Id  Share Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/title:
    post:
      tags:
      - case_persistence
      - cases
      summary: Generate Case Title
      description: "Generate a concise, case-specific title from case messages and\
        \ metadata.\n\n**Request body (optional):**\n- `max_words`: integer (312,\
        \ default 8) - Maximum words in generated title\n- `hint`: string - Optional\
        \ hint to guide title generation\n- `force`: boolean (default false) - Only\
        \ overwrite non-default titles when true\n\n**Returns:**\n- 200: TitleResponse\
        \ with X-Correlation-ID header\n- 422: ErrorResponse with code INSUFFICIENT_CONTEXT\
        \ and X-Correlation-ID header\n\n**Description:** Returns 422 when insufficient\
        \ meaningful context; clients SHOULD keep \nexisting title unchanged and may\
        \ retry later."
      operationId: generate_case_title_api_v1_cases__case_id__title_post
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: force
        in: query
        required: false
        schema:
          type: boolean
          description: Only overwrite non-default titles when true
          default: false
          title: Force
        description: Only overwrite non-default titles when true
      requestBody:
        content:
          application/json:
            schema:
              anyOf:
              - type: object
              - type: 'null'
              description: Optional request parameters
              title: Request Body
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TitleResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/archive:
    post:
      tags:
      - case_persistence
      - cases
      summary: Archive Case
      description: 'Archive a case


        Archives the case, marking it as completed and removing it from active lists.

        Requires owner or collaborator permissions.'
      operationId: archive_case_api_v1_cases__case_id__archive_post
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: reason
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Reason for archiving
          title: Reason
        description: Reason for archiving
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Archive Case Api V1 Cases  Case Id  Archive Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/search:
    post:
      tags:
      - case_persistence
      - cases
      summary: Search Cases
      description: 'Search cases by content


        Searches case titles, descriptions, and optionally message content

        for the specified query terms.'
      operationId: search_cases_api_v1_cases_search_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CaseSearchRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/CaseSummary'
                type: array
                title: Response Search Cases Api V1 Cases Search Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/analytics:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Analytics
      description: 'Get case analytics and metrics


        Returns analytics data including message counts, participant activity,

        resolution time, and other case metrics.'
      operationId: get_case_analytics_api_v1_cases__case_id__analytics_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Case Analytics Api V1 Cases  Case Id  Analytics
                  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/messages:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Messages Enhanced
      description: 'Enhanced message retrieval with debugging support and comprehensive metadata.

        Returns conversation messages for a case with pagination, metadata, and optional debugging information.

        Features:
        - Paginated message retrieval with offset/limit
        - Total count and retrieved count for UI pagination
        - Optional debug information for troubleshooting
        - Response headers with storage metadata
        - Error differentiation between empty case vs retrieval failure'
      operationId: get_case_messages_enhanced_api_v1_cases__case_id__messages_get
      security:
      - BearerAuth: []
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          default: 50
          title: Limit
        description: Maximum number of messages to return
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          default: 0
          title: Offset
        description: Offset for pagination
      - name: include_debug
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Include Debug
        description: Include debug information for troubleshooting
      responses:
        '200':
          description: Successful Response
          headers:
            X-Message-Count:
              description: Total number of messages in the case
              schema:
                type: integer
            X-Retrieved-Count:
              description: Number of messages successfully retrieved
              schema:
                type: integer
            X-Storage-Status:
              description: Storage operation status
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseMessagesResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/sessions/{session_id}/case:
    post:
      tags:
      - case_persistence
      - cases
      summary: Create Case For Session
      description: 'Create or get case for a session


        Associates a case with the given session. If no case exists, creates a new
        one.

        If force_new is true, always creates a new case.'
      operationId: create_case_for_session_api_v1_cases_sessions__session_id__case_post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      - name: title
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Case title
          title: Title
        description: Case title
      - name: force_new
        in: query
        required: false
        schema:
          type: boolean
          description: Force creation of new case
          default: false
          title: Force New
        description: Force creation of new case
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Create Case For Session Api V1 Cases Sessions  Session
                  Id  Case Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/sessions/{session_id}/resume/{case_id}:
    post:
      tags:
      - case_persistence
      - cases
      summary: Resume Case In Session
      description: 'Resume an existing case in a session


        Links the session to an existing case, allowing the user to continue

        a previous troubleshooting conversation.'
      operationId: resume_case_in_session_api_v1_cases_sessions__session_id__resume__case_id__post
      parameters:
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Resume Case In Session Api V1 Cases Sessions  Session
                  Id  Resume  Case Id  Post
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/queries:
    post:
      tags:
      - case_persistence
      - cases
      summary: Submit Case Query
      description: "Submit a query to a case.\n\nCRITICAL: Must return 201 (sync)\
        \ or 202 (async) per OpenAPI spec, NOT 404\n\nArgs:\n    case_id: Case identifier\
        \  \n    request: FastAPI request containing query data\n\nReturns:\n    201\
        \ with immediate result OR 202 with job Location for async processing"
      operationId: submit_case_query_api_v1_cases__case_id__queries_post
      security:
      - BearerAuth: []
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '201':
          description: Query processed synchronously
          headers:
            Location:
              description: URL of the query resource
              schema:
                type: string
            X-Correlation-ID:
              description: Request correlation ID
              schema:
                type: string
        '202':
          description: Query processing asynchronously
          headers:
            Location:
              description: URL of the query resource
              schema:
                type: string
            Retry-After:
              description: Seconds to wait before next poll
              schema:
                type: integer
            X-Correlation-ID:
              description: Request correlation ID
              schema:
                type: string
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - case_persistence
      - cases
      summary: List Case Queries
      description: 'List queries for a specific case with pagination.


        CRITICAL: Must return 200 [] for empty results, NOT 404'
      operationId: list_case_queries_api_v1_cases__case_id__queries_get
      security:
      - BearerAuth: []
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          default: 0
          title: Offset
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/queries/{query_id}:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Query
      description: 'Get query status and result (for async polling).


        Returns 200 with AgentResponse when completed, or 202 with QueryJobStatus
        while processing.

        Supports Retry-After header for polling guidance.'
      operationId: get_case_query_api_v1_cases__case_id__queries__query_id__get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: query_id
        in: path
        required: true
        schema:
          type: string
          title: Query Id
      responses:
        '200':
          description: Query completed - returns AgentResponse
          content:
            application/json:
              schema:
                anyOf:
                - $ref: '#/components/schemas/AgentResponse'
                - $ref: '#/components/schemas/QueryJobStatus'
                title: Response Get Case Query Api V1 Cases  Case Id  Queries  Query
                  Id  Get
                $ref: '#/components/schemas/AgentResponse'
          headers:
            X-Correlation-ID:
              description: Request correlation ID
              schema:
                type: string
        '202':
          description: Query still processing - returns job status
          headers:
            Retry-After:
              description: Seconds to wait before next poll
              schema:
                type: integer
            X-Correlation-ID:
              description: Request correlation ID
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QueryJobStatus'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/queries/{query_id}/result:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Query Result
      description: Return the final AgentResponse for a completed query.
      operationId: get_case_query_result_api_v1_cases__case_id__queries__query_id__result_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: query_id
        in: path
        required: true
        schema:
          type: string
          title: Query Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/health:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Service Health
      description: 'Get case service health status


        Returns health information about the case persistence system,

        including connectivity and performance metrics.'
      operationId: get_case_service_health_api_v1_cases_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Case Service Health Api V1 Cases Health Get
  /api/v1/cases/{case_id}/data:
    post:
      tags:
      - case_persistence
      - cases
      summary: Upload Case Data
      description: 'Upload data file to a specific case.


        Associates uploaded data with the case for context-aware troubleshooting.

        Returns 201 with Location header pointing to the created data resource.'
      operationId: upload_case_data_api_v1_cases__case_id__data_post
      security:
      - BearerAuth: []
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: description
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Description of uploaded data
          title: Description
        description: Description of uploaded data
      - name: expected_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Expected data type
          title: Expected Type
        description: Expected data type
      responses:
        '201':
          description: Data uploaded successfully
          content:
            application/json:
              schema: {}
          headers:
            Location:
              description: URL of the created resource
              schema:
                type: string
            X-Correlation-ID:
              description: Request correlation ID
              schema:
                type: string
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - case_persistence
      - cases
      summary: List Case Data
      description: 'List data files associated with a case.


        Returns array of data records with pagination headers.

        Always returns 200 with empty array if no data exists.'
      operationId: list_case_data_api_v1_cases__case_id__data_get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 200
          minimum: 1
          description: Maximum number of items to return
          default: 50
          title: Limit
        description: Maximum number of items to return
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Number of items to skip
          default: 0
          title: Offset
        description: Number of items to skip
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/cases/{case_id}/data/{data_id}:
    get:
      tags:
      - case_persistence
      - cases
      summary: Get Case Data
      description: Get specific data file details for a case.
      operationId: get_case_data_api_v1_cases__case_id__data__data_id__get
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: data_id
        in: path
        required: true
        schema:
          type: string
          title: Data Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Case Data Api V1 Cases  Case Id  Data  Data Id  Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - case_persistence
      - cases
      summary: Delete Case Data
      description: Remove data file from a case. Returns 204 No Content on success.
      operationId: delete_case_data_api_v1_cases__case_id__data__data_id__delete
      parameters:
      - name: case_id
        in: path
        required: true
        schema:
          type: string
          title: Case Id
      - name: data_id
        in: path
        required: true
        schema:
          type: string
          title: Data Id
      responses:
        '204':
          description: Data deleted successfully
          headers:
            X-Correlation-ID:
              description: Request correlation ID
              schema:
                type: string
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/jobs/{job_id}:
    get:
      tags:
      - job_management
      - job_management
      summary: Get Job Status
      description: 'Get job status with proper polling semantics


        Implements consistent job polling with appropriate headers:

        - 200 OK for running/pending jobs with Retry-After header

        - 303 See Other redirect for completed jobs with results

        - 200 OK for failed/cancelled jobs (terminal states)'
      operationId: get_job_status_api_v1_jobs__job_id__get
      parameters:
      - name: job_id
        in: path
        required: true
        schema:
          type: string
          title: Job Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobStatus'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - job_management
      - job_management
      summary: Cancel Job
      description: 'Cancel a running job


        Attempts to cancel a job if it''s still in a cancellable state.

        Returns 204 No Content on success.'
      operationId: cancel_job_api_v1_jobs__job_id__delete
      parameters:
      - name: job_id
        in: path
        required: true
        schema:
          type: string
          title: Job Id
      responses:
        '204':
          description: Successful Response
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/jobs:
    get:
      tags:
      - job_management
      - job_management
      summary: List Jobs
      description: 'List jobs with optional filtering and pagination


        Returns a paginated list of jobs with proper pagination headers.

        Supports filtering by job status.'
      operationId: list_jobs_api_v1_jobs_get
      parameters:
      - name: status_filter
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          description: Filter by job status
          title: Status Filter
        description: Filter by job status
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          maximum: 100
          minimum: 1
          description: Maximum number of results
          default: 50
          title: Limit
        description: Maximum number of results
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          minimum: 0
          description: Result offset for pagination
          default: 0
          title: Offset
        description: Result offset for pagination
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JobStatus'
                title: Response List Jobs Api V1 Jobs Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/jobs/health:
    get:
      tags:
      - job_management
      - job_management
      summary: Get Job Service Health
      description: 'Get job service health status


        Returns health information about the job management system,

        including connectivity and performance metrics.'
      operationId: get_job_service_health_api_v1_jobs_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: object
                title: Response Get Job Service Health Api V1 Jobs Health Get
  /debug/routes:
    get:
      summary: Debug Routes
      description: List all registered routes (path + methods).
      operationId: debug_routes_debug_routes_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /debug/health:
    get:
      summary: Debug Health
      description: Minimal debug health endpoint.
      operationId: debug_health_debug_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/v1/protection/health:
    get:
      tags:
      - protection
      - protection
      summary: Get Protection Health
      description: "Get protection system health status\n\nReturns comprehensive health\
        \ information for both basic and intelligent\nprotection components including\
        \ middleware status and configuration validation.\n\nReturns:\n    Dict with\
        \ protection system health status, active components, and validation results\n\
        \    \nRaises:\n    HTTPException: On service layer errors (503, 500)"
      operationId: get_protection_health_api_v1_protection_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                anyOf:
                - type: object
                - type: 'null'
                title: Response Get Protection Health Api V1 Protection Health Get
  /api/v1/protection/metrics:
    get:
      tags:
      - protection
      - protection
      summary: Get Protection Metrics
      description: "Get protection system metrics for monitoring\n\nReturns detailed\
        \ metrics for rate limiting, request deduplication, \nbehavioral analysis,\
        \ ML anomaly detection, and reputation system.\n\nReturns:\n    Dict with\
        \ protection system metrics including request counts, \n    protection rates,\
        \ and component-specific statistics\n    \nRaises:\n    HTTPException: On\
        \ service layer errors (503, 500)"
      operationId: get_protection_metrics_api_v1_protection_metrics_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                anyOf:
                - type: object
                - type: 'null'
                title: Response Get Protection Metrics Api V1 Protection Metrics Get
  /api/v1/protection/config:
    get:
      tags:
      - protection
      - protection
      summary: Get Protection Config
      description: "Get current protection system configuration\n\nReturns sanitized\
        \ configuration information (no sensitive data)\nfor both basic and intelligent\
        \ protection components.\n\nReturns:\n    Dict with protection configuration\
        \ including enabled features,\n    rate limits, timeouts, and security settings\
        \ (sanitized)\n    \nRaises:\n    HTTPException: On service layer errors (503,\
        \ 500)"
      operationId: get_protection_config_api_v1_protection_config_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                anyOf:
                - type: object
                - type: 'null'
                title: Response Get Protection Config Api V1 Protection Config Get
  /:
    get:
      summary: Root
      description: Root endpoint with API information.
      operationId: root__get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /health:
    get:
      summary: Health Check
      description: Enhanced health check endpoint with component-specific metrics
        and SLA monitoring.
      operationId: health_check_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /health/dependencies:
    get:
      summary: Health Check Dependencies
      description: Enhanced detailed health check for all dependencies with SLA metrics
      operationId: health_check_dependencies_health_dependencies_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /readiness:
    get:
      summary: Readiness
      description: 'Readiness probe: return unready if Redis or ChromaDB are unavailable.'
      operationId: readiness_readiness_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /health/logging:
    get:
      summary: Logging Health Check
      description: Get logging system health status.
      operationId: logging_health_check_health_logging_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /health/sla:
    get:
      summary: Health Check Sla
      description: Get SLA status and metrics for all components.
      operationId: health_check_sla_health_sla_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /health/components/{component_name}:
    get:
      summary: Health Check Component
      description: Get detailed health information for a specific component.
      operationId: health_check_component_health_components__component_name__get
      parameters:
      - name: component_name
        in: path
        required: true
        schema:
          type: string
          title: Component Name
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /health/patterns:
    get:
      summary: Health Check Error Patterns
      description: Get error patterns and recovery information from enhanced error
        context.
      operationId: health_check_error_patterns_health_patterns_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /metrics/performance:
    get:
      summary: Get Performance Metrics
      description: Get comprehensive performance metrics.
      operationId: get_performance_metrics_metrics_performance_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /metrics/realtime:
    get:
      summary: Get Realtime Metrics
      description: Get real-time performance metrics.
      operationId: get_realtime_metrics_metrics_realtime_get
      parameters:
      - name: time_window_minutes
        in: query
        required: false
        schema:
          type: integer
          default: 5
          title: Time Window Minutes
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /metrics/alerts:
    get:
      summary: Get Alert Status
      description: Get current alert status and statistics.
      operationId: get_alert_status_metrics_alerts_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /metrics/optimization:
    get:
      summary: Get System Optimization Metrics
      description: Get comprehensive system optimization metrics.
      operationId: get_system_optimization_metrics_metrics_optimization_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /admin/optimization/trigger-cleanup:
    get:
      summary: Trigger System Cleanup
      description: Trigger comprehensive system cleanup and optimization.
      operationId: trigger_system_cleanup_admin_optimization_trigger_cleanup_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/v1/auth/dev-login:
    post:
      tags:
      - authentication
      - authentication
      summary: Dev Login
      description: 'Development login endpoint


        Authenticates existing users and generates authentication tokens.

        This endpoint is designed for development environments and will be replaced

        with production OAuth2/OIDC integration later.


        **Flow:**

        1. Validate username format

        2. Find existing user (returns 401 if user doesn''t exist)

        3. Generate authentication token

        4. Return token with user profile


        **Security:**

        - Only authenticates existing users (no account creation)

        - Tokens expire after 24 hours

        - Input validation and sanitization

        - Proper OAuth2 error responses'
      operationId: dev_login_api_v1_auth_dev_login_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DevLoginRequest'
        required: true
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthTokenResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/auth/dev-register:
    post:
      tags:
      - authentication
      - authentication
      summary: Dev Register
      description: 'Development registration endpoint


        Creates a new user account and generates an authentication token.

        This endpoint is designed for development environments and will be replaced

        with production registration flows later.


        **Flow:**

        1. Validate username format

        2. Check if user already exists (returns 409 if exists)

        3. Create new user account

        4. Generate authentication token

        5. Return token with user profile


        **Security:**

        - Prevents duplicate account creation

        - Tokens expire after 24 hours

        - Input validation and sanitization

        - Auto-generates email and display name if not provided'
      operationId: dev_register_api_v1_auth_dev_register_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DevLoginRequest'
        required: true
      responses:
        '201':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthTokenResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/auth/logout:
    post:
      tags:
      - authentication
      - authentication
      summary: Logout
      description: 'Logout current user


        Revokes the current authentication token. The user will need to login

        again to access protected resources.


        **Flow:**

        1. Validate current authentication

        2. Revoke the current token

        3. Return confirmation'
      operationId: logout_api_v1_auth_logout_post
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LogoutResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/auth/me:
    get:
      tags:
      - authentication
      - authentication
      summary: Get Current User Profile
      description: 'Get current user profile


        Returns detailed information about the currently authenticated user,

        including profile data and token statistics.'
      operationId: get_current_user_profile_api_v1_auth_me_get
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfoResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/auth/health:
    get:
      tags:
      - authentication
      - authentication
      summary: Auth Health Check
      description: 'Authentication system health check


        Returns the status of authentication services including token management

        and user storage systems.'
      operationId: auth_health_check_api_v1_auth_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/v1/auth/dev/revoke-all-tokens:
    post:
      tags:
      - authentication
      - authentication
      summary: Dev Revoke All User Tokens
      description: 'Development endpoint: Revoke all tokens for current user


        **WARNING:** This endpoint is for development use only.

        It will be removed in production builds.'
      operationId: dev_revoke_all_user_tokens_api_v1_auth_dev_revoke_all_tokens_post
      parameters:
      - name: Authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LogoutResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
components:
  schemas:
    AgentResponse:
      properties:
        schema_version:
          type: string
          title: Schema Version
          default: 3.1.0
        content:
          type: string
          title: Content
        response_type:
          $ref: '#/components/schemas/ResponseType'
        session_id:
          type: string
          title: Session Id
        case_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Case Id
        confidence_score:
          anyOf:
          - type: number
          - type: 'null'
          title: Confidence Score
        sources:
          items:
            $ref: '#/components/schemas/Source'
          type: array
          title: Sources
        next_action_hint:
          anyOf:
          - type: string
          - type: 'null'
          title: Next Action Hint
        view_state:
          anyOf:
          - $ref: '#/components/schemas/ViewState'
          - type: 'null'
        plan:
          anyOf:
          - items:
              $ref: '#/components/schemas/PlanStep'
            type: array
          - type: 'null'
          title: Plan
      additionalProperties: true
      type: object
      required:
      - content
      - response_type
      - session_id
      title: AgentResponse
      description: The single, unified JSON payload returned from the backend.
    Body_batch_upload_data_api_v1_data_batch_upload_post:
      properties:
        files:
          items:
            type: string
            format: binary
          type: array
          title: Files
        session_id:
          type: string
          title: Session Id
      type: object
      required:
      - files
      - session_id
      title: Body_batch_upload_data_api_v1_data_batch_upload_post
    Body_upload_data_api_v1_data_upload_post:
      properties:
        file:
          type: string
          format: binary
          title: File
        session_id:
          type: string
          title: Session Id
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
      type: object
      required:
      - file
      - session_id
      title: Body_upload_data_api_v1_data_upload_post
    Body_upload_data_compat_api_v1_data_post:
      properties:
        file:
          type: string
          format: binary
          title: File
        session_id:
          type: string
          title: Session Id
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
      type: object
      required:
      - file
      - session_id
      title: Body_upload_data_compat_api_v1_data_post
    Body_upload_document_api_v1_knowledge_documents_post:
      properties:
        file:
          type: string
          format: binary
          title: File
        title:
          type: string
          title: Title
        document_type:
          type: string
          title: Document Type
        category:
          anyOf:
          - type: string
          - type: 'null'
          title: Category
        tags:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
        source_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Source Url
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
      type: object
      required:
      - file
      - title
      - document_type
      title: Body_upload_document_api_v1_knowledge_documents_post
    Body_upload_document_kb_api_v1_kb_documents_post:
      properties:
        file:
          type: string
          format: binary
          title: File
        title:
          type: string
          title: Title
        document_type:
          type: string
          title: Document Type
          default: troubleshooting_guide
        category:
          anyOf:
          - type: string
          - type: 'null'
          title: Category
        tags:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
        source_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Source Url
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
      type: object
      required:
      - file
      - title
      title: Body_upload_document_kb_api_v1_kb_documents_post
    Case:
      properties:
        case_id:
          type: string
          title: Case Id
        title:
          type: string
          title: Title
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        status:
          type: string
          enum:
          - active
          - resolved
          - archived
          title: Status
          default: active
        priority:
          type: string
          enum:
          - low
          - medium
          - high
          - critical
          title: Priority
          default: medium
        created_at:
          type: string
          title: Created At
        updated_at:
          type: string
          title: Updated At
        message_count:
          type: integer
          title: Message Count
          default: 0
        session_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
        owner_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Owner Id
      type: object
      required:
      - case_id
      - title
      title: Case
      description: Represents a troubleshooting case.
    CaseCreateRequest:
      properties:
        title:
          type: string
          maxLength: 200
          title: Title
          description: Case title
        description:
          anyOf:
          - type: string
            maxLength: 2000
          - type: 'null'
          title: Description
          description: Case description
        priority:
          $ref: '#/components/schemas/CasePriority'
          description: Case priority
          default: medium
        tags:
          items:
            type: string
          type: array
          title: Tags
          description: Case tags
        session_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
          description: Associated session ID
        initial_message:
          anyOf:
          - type: string
          - type: 'null'
          title: Initial Message
          description: Initial case message
      type: object
      required:
      - title
      title: CaseCreateRequest
      description: Request model for creating a new case
    CaseListFilter:
      properties:
        user_id:
          anyOf:
          - type: string
          - type: 'null'
          title: User Id
          description: Filter by participant user ID
        status:
          anyOf:
          - $ref: '#/components/schemas/CaseStatus'
          - type: 'null'
          description: Filter by case status
        priority:
          anyOf:
          - $ref: '#/components/schemas/CasePriority'
          - type: 'null'
          description: Filter by case priority
        owner_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Owner Id
          description: Filter by case owner
        tags:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Tags
          description: Filter by tags (any match)
        created_after:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Created After
          description: Filter by creation date
        created_before:
          anyOf:
          - type: string
            format: date-time
          - type: 'null'
          title: Created Before
          description: Filter by creation date
        include_empty:
          type: boolean
          title: Include Empty
          description: Include cases with message_count == 0
          default: false
        include_archived:
          type: boolean
          title: Include Archived
          description: Include archived cases
          default: false
        include_deleted:
          type: boolean
          title: Include Deleted
          description: Include deleted cases (admin only)
          default: false
        limit:
          type: integer
          maximum: 100.0
          title: Limit
          description: Maximum number of results
          default: 50
        offset:
          type: integer
          minimum: 0.0
          title: Offset
          description: Result offset for pagination
          default: 0
      type: object
      title: CaseListFilter
      description: Filter criteria for listing cases
    CasePriority:
      type: string
      enum:
      - low
      - medium
      - high
      - critical
      title: CasePriority
      description: Case priority levels
    CaseResponse:
      properties:
        schema_version:
          type: string
          enum:
          - 3.1.0
          const: 3.1.0
          title: Schema Version
          default: 3.1.0
        case:
          $ref: '#/components/schemas/Case'
      type: object
      required:
      - case
      title: CaseResponse
      description: Response payload for case creation.
    CaseSearchRequest:
      properties:
        query:
          type: string
          minLength: 1
          title: Query
          description: Search query
        filters:
          anyOf:
          - $ref: '#/components/schemas/CaseListFilter'
          - type: 'null'
          description: Additional filters
        search_in_messages:
          type: boolean
          title: Search In Messages
          description: Search in message content
          default: true
        search_in_context:
          type: boolean
          title: Search In Context
          description: Search in case context
          default: true
      type: object
      required:
      - query
      title: CaseSearchRequest
      description: Request model for searching cases
    CaseShareRequest:
      properties:
        user_id:
          type: string
          title: User Id
          description: User ID to share with
        role:
          $ref: '#/components/schemas/ParticipantRole'
          description: Role to assign
          default: viewer
        message:
          anyOf:
          - type: string
          - type: 'null'
          title: Message
          description: Optional message to include
      type: object
      required:
      - user_id
      title: CaseShareRequest
      description: Request model for sharing a case with other users
    CaseStatus:
      type: string
      enum:
      - active
      - investigating
      - solved
      - stalled
      - archived
      - shared
      title: CaseStatus
      description: Case lifecycle status enumeration
    CaseSummary:
      properties:
        case_id:
          type: string
          title: Case Id
        title:
          type: string
          title: Title
        status:
          $ref: '#/components/schemas/CaseStatus'
        priority:
          $ref: '#/components/schemas/CasePriority'
        owner_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Owner Id
        created_at:
          type: string
          format: date-time
          title: Created At
        updated_at:
          type: string
          format: date-time
          title: Updated At
        last_activity_at:
          type: string
          format: date-time
          title: Last Activity At
        message_count:
          type: integer
          title: Message Count
        participant_count:
          type: integer
          title: Participant Count
        tags:
          items:
            type: string
          type: array
          title: Tags
      type: object
      required:
      - case_id
      - title
      - status
      - priority
      - owner_id
      - created_at
      - updated_at
      - last_activity_at
      - message_count
      - participant_count
      - tags
      title: CaseSummary
      description: Summary view of a case for list operations
    CaseUpdateRequest:
      properties:
        title:
          anyOf:
          - type: string
          - type: 'null'
          title: Title
          description: Updated case title
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
          description: Updated case description
        status:
          anyOf:
          - $ref: '#/components/schemas/CaseStatus'
          - type: 'null'
          description: Updated case status
        priority:
          anyOf:
          - $ref: '#/components/schemas/CasePriority'
          - type: 'null'
          description: Updated case priority
        tags:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Tags
          description: Updated case tags
      type: object
      title: CaseUpdateRequest
      description: Request model for updating case details
    DataType:
      type: string
      enum:
      - log_file
      - config_file
      - error_report
      - documentation
      - screenshot
      - other
      title: DataType
      description: Defines the type of data uploaded by users.
    DevLoginRequest:
      properties:
        username:
          type: string
          maxLength: 50
          minLength: 3
          title: Username
          description: Username or email address (3-50 chars)
          example: developer@example.com
        email:
          anyOf:
          - type: string
          - type: 'null'
          title: Email
          description: Optional email address (will auto-generate if not provided)
          example: john.doe@faultmaven.local
        display_name:
          anyOf:
          - type: string
            maxLength: 100
          - type: 'null'
          title: Display Name
          description: Optional display name (will auto-generate if not provided)
          example: John Doe
      type: object
      required:
      - username
      title: DevLoginRequest
      description: 'Request model for development login


        Validates user input for the dev-login endpoint.

        Supports username-based login with optional user details.'
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    JobStatus:
      properties:
        job_id:
          type: string
          title: Job Id
        status:
          type: string
          enum:
          - pending
          - running
          - completed
          - failed
          title: Status
        progress:
          anyOf:
          - type: integer
          - type: 'null'
          title: Progress
        result:
          anyOf:
          - type: object
          - type: 'null'
          title: Result
        error:
          anyOf:
          - type: string
          - type: 'null'
          title: Error
        created_at:
          type: string
          title: Created At
        updated_at:
          type: string
          title: Updated At
      type: object
      required:
      - job_id
      - status
      - created_at
      - updated_at
      title: JobStatus
      description: Async job status tracking model.
    KnowledgeBaseDocument:
      properties:
        document_id:
          type: string
          title: Document Id
        title:
          type: string
          title: Title
        content:
          type: string
          title: Content
        document_type:
          type: string
          title: Document Type
        category:
          anyOf:
          - type: string
          - type: 'null'
          title: Category
        status:
          type: string
          title: Status
          default: processed
        tags:
          items:
            type: string
          type: array
          title: Tags
        source_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Source Url
        created_at:
          type: string
          title: Created At
        updated_at:
          type: string
          title: Updated At
        metadata:
          anyOf:
          - type: object
          - type: 'null'
          title: Metadata
      type: object
      required:
      - document_id
      - title
      - content
      - document_type
      - created_at
      - updated_at
      title: KnowledgeBaseDocument
      description: Response model for knowledge base document operations.
    Message:
      properties:
        message_id:
          type: string
          title: Message Id
        role:
          type: string
          enum:
          - user
          - agent
          title: Role
        content:
          type: string
          title: Content
        created_at:
          type: string
          title: Created At
          description: ISO 8601 datetime string
      type: object
      required:
      - message_id
      - role
      - content
      - created_at
      title: Message
      description: Message model for conversation endpoints.
    MessageRetrievalDebugInfo:
      properties:
        redis_key:
          type: string
          title: Redis Key
          description: Redis key used for message storage
        redis_operation_time_ms:
          type: number
          title: Redis Operation Time Ms
          description: Time taken for Redis operation
        storage_errors:
          items:
            type: string
          type: array
          title: Storage Errors
          description: Any storage-related errors encountered
          default: []
        message_parsing_errors:
          type: integer
          title: Message Parsing Errors
          description: Number of messages that failed to parse
          default: 0
      type: object
      required:
      - redis_key
      - redis_operation_time_ms
      title: MessageRetrievalDebugInfo
      description: Debug information for message retrieval operations.
    CaseMessagesResponse:
      properties:
        messages:
          items:
            $ref: '#/components/schemas/Message'
          type: array
          title: Messages
          description: Array of conversation messages
        total_count:
          type: integer
          title: Total Count
          description: Total number of messages in the case
        retrieved_count:
          type: integer
          title: Retrieved Count
          description: Number of messages successfully retrieved
        has_more:
          type: boolean
          title: Has More
          description: Whether more messages are available for pagination
        next_offset:
          anyOf:
          - type: integer
          - type: 'null'
          title: Next Offset
          description: Offset for next page (null if no more pages)
        debug_info:
          anyOf:
          - $ref: '#/components/schemas/MessageRetrievalDebugInfo'
          - type: 'null'
          title: Debug Info
          description: Debug information (only when include_debug=true)
      type: object
      required:
      - messages
      - total_count
      - retrieved_count
      - has_more
      title: CaseMessagesResponse
      description: Enhanced response model for case message retrieval with debugging support.
    ParticipantRole:
      type: string
      enum:
      - owner
      - collaborator
      - viewer
      - support
      title: ParticipantRole
      description: Participant roles in case collaboration
    PlanStep:
      properties:
        description:
          type: string
          title: Description
      type: object
      required:
      - description
      title: PlanStep
      description: Represents one step in a multi-step plan.
    ProcessingStatus:
      type: string
      enum:
      - pending
      - processing
      - completed
      - failed
      title: ProcessingStatus
      description: Defines the status of data processing operations.
    QueryJobStatus:
      properties:
        query_id:
          type: string
          title: Query Id
        case_id:
          type: string
          title: Case Id
        status:
          type: string
          enum:
          - pending
          - processing
          - running
          - completed
          - failed
          - cancelled
          title: Status
        progress_percentage:
          anyOf:
          - type: integer
            maximum: 100.0
            minimum: 0.0
          - type: 'null'
          title: Progress Percentage
          description: Processing progress percentage
        started_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Started At
          description: Job start time (UTC ISO 8601)
        last_updated_at:
          type: string
          title: Last Updated At
        error:
          anyOf:
          - type: object
          - type: 'null'
          title: Error
          description: Error details if status is failed
        result:
          anyOf:
          - $ref: '#/components/schemas/AgentResponse'
          - type: 'null'
          description: Final result if completed
      type: object
      required:
      - query_id
      - case_id
      - status
      title: QueryJobStatus
      description: Case-scoped query job status tracking model.
    QueryRequest:
      properties:
        session_id:
          type: string
          title: Session Id
        query:
          type: string
          title: Query
        context:
          anyOf:
          - type: object
          - type: 'null'
          title: Context
        priority:
          type: string
          enum:
          - low
          - normal
          - medium
          - high
          - critical
          title: Priority
          default: normal
        timestamp:
          type: string
          title: Timestamp
      type: object
      required:
      - session_id
      - query
      title: QueryRequest
      description: 'The JSON payload sent from the frontend when the user asks a question.

        Note: case_id is provided in the URL path, not in the request body.'
    ResponseType:
      type: string
      enum:
      - ANSWER
      - PLAN_PROPOSAL
      - CLARIFICATION_REQUEST
      - CONFIRMATION_REQUEST
      - SOLUTION_READY
      - NEEDS_MORE_DATA
      - ESCALATION_REQUIRED
      - DATA_REQUEST
      - ERROR
      title: ResponseType
      description: Defines the agent's primary intent for this turn.
    SearchRequest:
      properties:
        query:
          type: string
          minLength: 1
          title: Query
          description: Search query
        document_type:
          anyOf:
          - type: string
          - type: 'null'
          title: Document Type
          description: Filter by document type
        category:
          anyOf:
          - type: string
          - type: 'null'
          title: Category
          description: Filter by document category
        tags:
          anyOf:
          - type: string
          - type: 'null'
          title: Tags
          description: Filter by tags (comma-separated)
        filters:
          anyOf:
          - type: object
          - type: 'null'
          title: Filters
          description: Advanced filters for search
        similarity_threshold:
          anyOf:
          - type: number
            maximum: 1.0
            minimum: 0.0
          - type: 'null'
          title: Similarity Threshold
          description: Minimum similarity score threshold (0.0-1.0)
        rank_by:
          anyOf:
          - type: string
          - type: 'null'
          title: Rank By
          description: Field to rank results by (e.g., priority)
        limit:
          type: integer
          maximum: 100.0
          exclusiveMinimum: 0.0
          title: Limit
          description: Maximum number of results
          default: 10
      type: object
      required:
      - query
      title: SearchRequest
      description: Request model for knowledge base search
    SessionCreateRequest:
      properties:
        timeout_minutes:
          anyOf:
          - type: integer
            maximum: 1440.0
            minimum: 1.0
          - type: 'null'
          title: Timeout Minutes
          default: 30
        session_type:
          anyOf:
          - type: string
            minLength: 1
          - type: 'null'
          title: Session Type
          default: troubleshooting
        metadata:
          anyOf:
          - type: object
          - type: 'null'
          title: Metadata
        client_id:
          anyOf:
          - type: string
            maxLength: 255
            minLength: 1
          - type: 'null'
          title: Client Id
          description: Client/device identifier for session resumption. If provided,
            existing session for this client will be resumed.
      type: object
      title: SessionCreateRequest
      description: Request model for session creation.
    SessionResponse:
      type: object
      required:
      - session_id
      - status
      properties:
        session_id:
          type: string
          description: Unique session identifier
        user_id:
          type: string
          description: Associated user identifier
          nullable: true
        client_id:
          type: string
          description: Client/device identifier for session resumption
          nullable: true
        status:
          type: string
          enum:
          - active
          - idle
          - expired
          description: Current session status
        created_at:
          type: string
          format: date-time
          description: Session creation timestamp
        session_resumed:
          type: boolean
          description: Indicates if this was an existing session resumed
          nullable: true
        session_type:
          type: string
          description: Type of session (e.g., troubleshooting)
        message:
          type: string
          description: Status message about session creation/resumption
        metadata:
          type: object
          description: Session metadata and context
      examples:
        new_session:
          summary: New Session Created
          value:
            session_id: session_abc123
            user_id: user_123
            client_id: browser-client-abc123
            status: active
            created_at: '2025-01-15T10:00:00Z'
            session_resumed: false
            session_type: troubleshooting
            message: Session created successfully
            metadata:
              environment: production
              team: platform-team
        resumed_session:
          summary: Existing Session Resumed
          value:
            session_id: session_existing_456
            user_id: user_123
            client_id: browser-client-abc123
            status: active
            created_at: '2025-01-15T09:30:00Z'
            session_resumed: true
            session_type: troubleshooting
            message: Session resumed successfully
            metadata:
              environment: production
              team: platform-team
              investigations_count: 2
    SessionRestoreRequest:
      properties:
        restore_point:
          type: string
          minLength: 1
          title: Restore Point
        include_data:
          type: boolean
          title: Include Data
          default: true
        type:
          anyOf:
          - type: string
          - type: 'null'
          title: Type
          default: full
      type: object
      required:
      - restore_point
      title: SessionRestoreRequest
      description: Request model for session restoration.
    Source:
      properties:
        type:
          $ref: '#/components/schemas/SourceType'
        content:
          type: string
          title: Content
        confidence:
          anyOf:
          - type: number
          - type: 'null'
          title: Confidence
        metadata:
          anyOf:
          - type: object
          - type: 'null'
          title: Metadata
      type: object
      required:
      - type
      - content
      title: Source
      description: Represents a single piece of citable evidence to build user trust.
    SourceType:
      type: string
      enum:
      - knowledge_base
      - log_file
      - web_search
      - documentation
      - previous_analysis
      - user_provided
      title: SourceType
      description: Defines the origin of a piece of evidence.
    TitleResponse:
      properties:
        schema_version:
          type: string
          title: Schema Version
          default: 3.1.0
        title:
          type: string
          title: Title
      type: object
      required:
      - title
      title: TitleResponse
      description: Simplified title response schema per API spec.
    UploadedData:
      properties:
        id:
          type: string
          title: Id
        name:
          type: string
          title: Name
        type:
          $ref: '#/components/schemas/DataType'
        size_bytes:
          type: integer
          title: Size Bytes
        upload_timestamp:
          type: string
          title: Upload Timestamp
        processing_status:
          $ref: '#/components/schemas/ProcessingStatus'
        processing_summary:
          anyOf:
          - type: string
          - type: 'null'
          title: Processing Summary
        confidence_score:
          anyOf:
          - type: number
          - type: 'null'
          title: Confidence Score
      type: object
      required:
      - id
      - name
      - type
      - size_bytes
      - upload_timestamp
      - processing_status
      title: UploadedData
      description: A strongly-typed model for data uploaded by the user.
    User:
      properties:
        user_id:
          type: string
          title: User Id
        email:
          type: string
          title: Email
        name:
          type: string
          title: Name
        created_at:
          type: string
          title: Created At
        last_login:
          anyOf:
          - type: string
          - type: 'null'
          title: Last Login
      type: object
      required:
      - user_id
      - email
      - name
      title: User
      description: Represents a user in the system.
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
    ViewState:
      properties:
        session_id:
          type: string
          title: Session Id
        user:
          $ref: '#/components/schemas/User'
        active_case:
          anyOf:
          - $ref: '#/components/schemas/Case'
          - type: 'null'
        cases:
          items:
            $ref: '#/components/schemas/Case'
          type: array
          title: Cases
        messages:
          items:
            type: object
          type: array
          title: Messages
        uploaded_data:
          items:
            $ref: '#/components/schemas/UploadedData'
          type: array
          title: Uploaded Data
        show_case_selector:
          type: boolean
          title: Show Case Selector
          default: true
        show_data_upload:
          type: boolean
          title: Show Data Upload
          default: true
        loading_state:
          anyOf:
          - type: string
          - type: 'null'
          title: Loading State
        memory_context:
          anyOf:
          - type: object
          - type: 'null'
          title: Memory Context
        planning_state:
          anyOf:
          - type: object
          - type: 'null'
          title: Planning State
      type: object
      required:
      - session_id
      - user
      title: ViewState
      description: 'Comprehensive view state representing the complete frontend rendering
        state.

        This is the single source of truth for what the frontend should display.'
    ErrorResponse:
      type: object
      required:
      - detail
      properties:
        detail:
          type: string
          description: Human-readable error description
        error_type:
          type: string
          description: Machine-readable error classification
          enum:
          - ValidationError
          - AuthenticationError
          - AuthorizationError
          - NotFoundError
          - RateLimitError
          - ServiceUnavailableError
          - InternalServerError
        correlation_id:
          type: string
          format: uuid
          description: Unique identifier for request tracing and support
        timestamp:
          type: string
          format: date-time
          description: Error occurrence timestamp in ISO format
        context:
          type: object
          description: Additional error context for debugging
      example:
        detail: Invalid session ID provided
        error_type: ValidationError
        correlation_id: 123e4567-e89b-12d3-a456-426614174000
        timestamp: '2025-01-15T10:30:00Z'
        context:
          session_id: invalid_session_123
          validation_errors:
          - Session ID format invalid
    TroubleshootingResponse:
      type: object
      required:
      - investigation_id
      - status
      - session_id
      properties:
        investigation_id:
          type: string
          description: Unique identifier for this troubleshooting investigation
        status:
          type: string
          enum:
          - in_progress
          - completed
          - failed
          - requires_input
          description: Current status of the investigation
        findings:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                description: Finding category
                enum:
                - root_cause
                - contributing_factor
                - symptom
                - recommendation
              message:
                type: string
                description: Finding description
              severity:
                type: string
                enum:
                - critical
                - high
                - medium
                - low
                - info
                description: Finding severity level
              confidence:
                type: number
                minimum: 0
                maximum: 1
                description: AI confidence in this finding (0.0 to 1.0)
              evidence:
                type: array
                items:
                  type: string
                description: Supporting evidence for this finding
          description: List of findings from the investigation
        recommendations:
          type: array
          items:
            type: object
            properties:
              action:
                type: string
                description: Recommended action to take
              priority:
                type: string
                enum:
                - immediate
                - high
                - medium
                - low
                description: Action priority
              impact:
                type: string
                description: Expected impact of this action
              effort:
                type: string
                enum:
                - low
                - medium
                - high
                description: Estimated effort required
          description: Recommended actions based on findings
        session_id:
          type: string
          description: Session ID for this troubleshooting session
        reasoning_trace:
          type: array
          items:
            type: object
            properties:
              step:
                type: string
              reasoning:
                type: string
              data_sources:
                type: array
                items:
                  type: string
          description: AI reasoning process trace for transparency
      example:
        investigation_id: inv_789
        status: completed
        findings:
        - type: root_cause
          message: Database connection pool exhausted due to connection leak
          severity: high
          confidence: 0.9
          evidence:
          - 'Connection pool size: 20, Active connections: 20'
          - No idle connections available
          - Long-running transactions detected
        recommendations:
        - action: Increase database connection pool size to 50
          priority: immediate
          impact: Should restore service within 5 minutes
          effort: low
        - action: Review application code for connection leaks
          priority: high
          impact: Prevents future occurrences
          effort: medium
        session_id: session_db_123
        reasoning_trace:
        - step: symptom_analysis
          reasoning: HTTP 500 errors correlate with database timeout errors
          data_sources:
          - application_logs
          - database_metrics
        - step: hypothesis_formation
          reasoning: Connection pool exhaustion is most likely cause given metrics
          data_sources:
          - connection_pool_metrics
          - transaction_logs
    DataIngestionResponse:
      type: object
      required:
      - ingestion_id
      - status
      properties:
        ingestion_id:
          type: string
          description: Unique identifier for this data ingestion
        status:
          type: string
          enum:
          - processing
          - completed
          - failed
          description: Current processing status
        file_info:
          type: object
          properties:
            filename:
              type: string
            size_bytes:
              type: integer
            file_type:
              type: string
            detected_format:
              type: string
          description: Information about the uploaded file
        processing_results:
          type: object
          properties:
            lines_processed:
              type: integer
            errors_found:
              type: integer
            insights_extracted:
              type: integer
            processing_time_ms:
              type: integer
          description: Results of data processing
      example:
        ingestion_id: ingest_456
        status: completed
        file_info:
          filename: app.log
          size_bytes: 1048576
          file_type: application/log
          detected_format: json_logs
        processing_results:
          lines_processed: 15420
          errors_found: 23
          insights_extracted: 8
          processing_time_ms: 2340
    AuthTokenResponse:
      properties:
        access_token:
          type: string
          title: Access Token
          description: Bearer access token
          example: 550e8400-e29b-41d4-a716-446655440000
        token_type:
          type: string
          title: Token Type
          description: Token type (always 'bearer')
          default: bearer
        expires_in:
          type: integer
          title: Expires In
          description: Token expiration time in seconds
          example: 86400
        session_id:
          type: string
          title: Session Id
          description: Session identifier for multi-turn conversations
          example: session-550e8400-e29b-41d4-a716-446655440000
        user:
          $ref: '#/components/schemas/UserProfile'
          description: Authenticated user profile
      type: object
      required:
      - access_token
      - expires_in
      - session_id
      - user
      title: AuthTokenResponse
      description: 'Authentication token response


        Standard OAuth2-compatible token response format.

        Includes token, expiration, and user information.'
    UserProfile:
      properties:
        user_id:
          type: string
          title: User Id
          description: Unique user identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        username:
          type: string
          title: Username
          description: Username
          example: john.doe
        email:
          type: string
          title: Email
          description: Email address
          example: john.doe@faultmaven.local
        display_name:
          type: string
          title: Display Name
          description: Display name
          example: John Doe
        created_at:
          type: string
          title: Created At
          description: Account creation timestamp (ISO format)
          example: '2025-01-15T10:00:00Z'
        is_dev_user:
          type: boolean
          title: Is Dev User
          description: Development user flag
          default: true
      type: object
      required:
      - user_id
      - username
      - email
      - display_name
      - created_at
      title: UserProfile
      description: 'Public user profile information


        Represents user information safe for API responses.

        Excludes sensitive information like hashed passwords.'
    UserInfoResponse:
      properties:
        user_id:
          type: string
          title: User Id
          description: Unique user identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        username:
          type: string
          title: Username
          description: Username
          example: john.doe
        email:
          type: string
          title: Email
          description: Email address
          example: john.doe@faultmaven.local
        display_name:
          type: string
          title: Display Name
          description: Display name
          example: John Doe
        created_at:
          type: string
          title: Created At
          description: Account creation timestamp (ISO format)
          example: '2025-01-15T10:00:00Z'
        is_dev_user:
          type: boolean
          title: Is Dev User
          description: Development user flag
          default: true
        last_login:
          anyOf:
          - type: string
          - type: 'null'
          title: Last Login
          description: Last login timestamp (ISO format)
          example: '2025-01-15T14:30:00Z'
        token_count:
          type: integer
          title: Token Count
          description: Number of active tokens for this user
          default: 0
          example: 2
      type: object
      required:
      - user_id
      - username
      - email
      - display_name
      - created_at
      title: UserInfoResponse
      description: 'Extended user information response


        Includes additional metadata for the current user.'
    LogoutResponse:
      properties:
        message:
          type: string
          title: Message
          description: Logout confirmation message
          default: Logged out successfully
        revoked_tokens:
          type: integer
          title: Revoked Tokens
          description: Number of tokens that were revoked
          example: 1
      type: object
      required:
      - revoked_tokens
      title: LogoutResponse
      description: Logout response model
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: API key authentication (planned for future implementation)
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: UUID
      description: Bearer token authentication using UUID tokens from /auth/dev-login
  headers:
    X-Correlation-ID:
      description: Unique identifier for request tracing and debugging
      schema:
        type: string
        format: uuid
      example: 550e8400-e29b-41d4-a716-446655440000
externalDocs:
  description: FaultMaven Documentation
  url: https://docs.faultmaven.ai
tags:
- name: troubleshooting
  description: AI-powered troubleshooting operations
  externalDocs:
    description: Troubleshooting Guide
    url: https://docs.faultmaven.ai/troubleshooting
- name: data_ingestion
  description: File upload and data processing operations
  externalDocs:
    description: Data Ingestion Guide
    url: https://docs.faultmaven.ai/data-ingestion
- name: knowledge_base
  description: Knowledge base and document management operations
  externalDocs:
    description: Knowledge Base Guide
    url: https://docs.faultmaven.ai/knowledge-base
- name: session_management
  description: Session lifecycle and management operations
