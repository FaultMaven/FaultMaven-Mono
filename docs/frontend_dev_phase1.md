# FaultMaven Frontend - Implementation Document (Phase 1: Structure)

**Date:** 2025-05-04
**Status:** End of Phase 1 (Framework Setup)
**Scope:** Documents the implemented structure, core components, and setup of the FaultMaven Next.js frontend application.

---

## 1. Introduction

This document details the technical implementation of the FaultMaven frontend structure, based on the initial [Frontend Design Document (v1.1)](link_to_design_doc_if_available). Phase 1 focused on establishing the project framework, core layout, essential pages, placeholder components, basic state management for authentication, and integration of the chosen UI library, providing a skeleton ready for content and detailed feature implementation in Phase 2.

---

## 2. Technology Stack

The frontend application utilizes the following core technologies:

* **Framework:** Next.js (v14+ using App Router)
* **Language:** TypeScript
* **UI Library:** React 18+
* **Styling:** Tailwind CSS
* **Component Library:** shadcn/ui (built on Radix UI primitives and Tailwind CSS)
* **Package Manager:** pnpm (or npm/yarn as per setup)
* **State Management (Client):** React Context API (for Auth), React `useState` (for local component state).
* **Linting/Formatting:** ESLint, Prettier

---

## 3. Project Structure (`frontend/`)

The `frontend` directory contains the Next.js application. Key directories and their current state:

* **`public/`**: Contains static assets served directly.
    * Includes logo files: `fm-logo-standard.svg`, `fm-logo-inverted.svg`.
    * Contains placeholder icons from `create-next-app` (`file.svg`, `globe.svg`, `window.svg`) - *should be reviewed/removed*.
    * *Note: The `tree` output showed `favicon.ico` under `src/app/`, which is non-standard. It should be moved to either `public/` or the root of `src/app/` based on Next.js version conventions for App Router favicons.*
* **`src/app/`**: Core Next.js App Router directory.
    * **`layout.tsx`**: Root layout component, includes Header, Footer, Font setup, and wraps content with `AuthProvider`.
    * **`page.tsx`**: Homepage, currently renders placeholder section components from `src/components/landing/`.
    * **`globals.css`**: *Note: This file is listed under `src/app/` in the `tree` output. It should ideally reside in `src/styles/`. Verify its location and import path in `layout.tsx`.* Contains Tailwind directives and global styles.
    * **`/login/page.tsx`**: Login page structure, renders the `LoginForm` component.
    * **`/dashboard/page.tsx`**: Dashboard page structure, renders `DashboardLayout`, `ChatInterface`, `DataInputArea`. Implements basic client-side route protection using `useAuth`.
    * **`/products/page.tsx`, `/solutions/page.tsx`, `/resources/page.tsx`, `/pricing/page.tsx`, `/contact-sales/page.tsx`**: Placeholder pages created, each exporting a default component rendering a simple heading.
* **`src/components/`**: Reusable React components.
    * **`Header.tsx`**: Implemented with logo, `NavigationMenu` (for Products, Solutions, Resources dropdowns), direct links (Pricing, Contact Sales), and conditional rendering of Login/Dashboard/Logout links based on `useAuth` state. Uses `usePathname` for basic active link styling. Includes placeholder for mobile menu.
    * **`Footer.tsx`**: Implemented with basic copyright information.
    * **`LoginForm.tsx`**: Implemented using shadcn/ui (`Card`, `Label`, `Input`, `Button`). Uses `useState` to manage email/password inputs. Includes `handleSubmit` calling a placeholder API function (`lib/auth.ts`) and basic `isLoading`/`error` state handling and UI feedback. Marked with `'use client';`.
    * **`DashboardLayout.tsx`**: Basic structure with placeholder sidebar and main content area accepting children.
    * **`ChatInterface.tsx`**: Basic structure using shadcn `Textarea` and `Button`. Includes `useState` for input management. Marked with `'use client';`.
    * **`DataInputArea.tsx`**: Basic structure using shadcn `Card`, `Textarea`, `Input type="file"`, `Button`. Marked with `'use client';`.
    * **`landing/`**: Contains placeholder functional components for each section of the homepage (`HeroSection`, `ProblemSection`, etc.).
    * **`ui/`**: Contains component code generated by the `shadcn-ui add` CLI command (e.g., `button.tsx`, `input.tsx`, `card.tsx`, `navigation-menu.tsx`, etc.).
* **`src/context/`**: Contains React Context providers.
    * **`AuthContext.tsx`**: Implemented provider (`AuthProvider`) and hook (`useAuth`). Manages `token` (read/write from `localStorage` - noted as placeholder storage), `isLoading`, and derived `isAuthenticated` state. Provides `login` and `logout` functions. Marked with `'use client';`.
* **`src/lib/`**: Utility functions and libraries.
    * **`utils.ts`**: Standard shadcn/ui utility file (includes `cn` function).
    * **`auth.ts`**: Contains placeholder `async function loginUser(...)` simulating an API call with delay and basic success/error logic.
* **Configuration Files:** Standard Next.js/TS/Tailwind config files (`next.config.mjs`, `tsconfig.json`, `tailwind.config.ts`, `postcss.config.mjs`, `components.json`, `eslint.config.mjs`) are present.

---

## 4. Key Implemented Features (Phase 1)

* **Project Setup:** Next.js App Router project initialized with TypeScript, Tailwind CSS.
* **UI Library:** shadcn/ui initialized, and core components (Button, Input, Label, Card, NavigationMenu, Textarea, Separator) added.
* **Basic Routing:** Placeholder pages created for all main navigation links (`/`, `/login`, `/dashboard`, `/products`, `/solutions`, `/resources`, `/pricing`, `/contact-sales`).
* **Core Layout:** Root layout established with Header and Footer applied globally.
* **Component Structure:** Placeholder components created for major UI sections (Header, Footer, LoginForm, DashboardLayout, ChatInterface, DataInputArea, Landing Sections).
* **Basic Authentication State:** React Context (`AuthContext`) implemented to track login status (based on simulated token in `localStorage`).
* **Conditional UI:** Header navigation links dynamically change based on authentication state (`isLoading`, `isAuthenticated`).
* **Basic Route Protection:** Dashboard page (`/dashboard`) redirects to `/login` if user is not authenticated (client-side check).
* **Form State:** Login form captures user input using `useState`.
* **Simulated API Interaction:** Login form calls a placeholder async function and handles basic loading/error UI feedback.

---

## 5. Build Process

* The application is built using the script defined in `package.json` (typically `next build`), executed via the chosen package manager (e.g., `pnpm build`).
* This generates the optimized production output in the `.next/` directory, which is the target for deployment to hosting platforms like Vercel/Netlify.

---

## 6. Next Steps (Entering Phase 2)

The primary focus shifts to content creation and implementing core functionality:

1.  **Content Population:** Fill in the actual marketing copy, descriptions, and visuals within the homepage landing section components (`src/components/landing/*`). Build out content for other static pages (Products, Solutions, etc.).
2.  **Backend API Implementation:** Develop the required FastAPI endpoints, starting with `/auth/token` (for login), `/register`, `/users/me`, and potentially initial versions of `/data` and `/query` if not already functional.
3.  **Real API Integration:** Replace the placeholder `loginUser` function in `src/lib/auth.ts` with actual `Workspace` or `axios` calls to the backend. Implement similar API call functions for `/data` and `/query`.
4.  **Dashboard Functionality:** Implement the logic within `ChatInterface` and `DataInputArea` to call the `/query` and `/data` backend endpoints, handle responses, and display results. Implement chat history display.
5.  **Authentication Refinement:** Implement secure token storage (e.g., HttpOnly cookies for refresh tokens), token refresh logic, sign-up flow, password reset, and potentially server-side route protection (e.g., using Next.js Middleware).
6.  **Shared UI Library:** Formalize the shared UI components and potentially publish `@faultmaven/ui` for use by the browser extension.
7.  **Testing:** Write unit, component, and E2E tests for the implemented features.
8.  **Styling Polish:** Refine Tailwind styles across all components for a polished look and feel.

---